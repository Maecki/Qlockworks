var ROOT="";var WEB="";var TITLE="";function init(a){WEB=a.web;ROOT=a.root;TITLE=a.title;$(".Page").hover(function(){$("img#header_co").fadeIn(5000)});initPlugins();gapi.plus.go()}function show(e){document.title=e.innerHTML+" | "+TITLE;var d=document.getElementsByTagName("li");for(i=0;i<d.length;i++){if(d[i].getAttribute("data-key")){d[i].className=d[i].getAttribute("data-key")==e.getAttribute("data-key")?"Select":""}}var f=document.getElementById("content");$(f).hide("drop",function(a){return function(){ajaxPost("page","get","key="+e.getAttribute("data-key"),function(c){return function(){if(this.readyState==4&&this.status==200){c.innerHTML=this.responseText;initPlugins();$(c).show("drop")}}}(a))}}(f));return false}function gallery(a){document.title=a.getAttribute("data-name")+" | "+TITLE;var d=document.getElementById("content");$(d).hide("drop",function(e){return function(){ajaxPost("page","gallery","id="+a.getAttribute("data-id"),function(c){return function(){if(this.readyState==4&&this.status==200){c.innerHTML=this.responseText;initPlugins();$(c).show("drop")}}}(e))}}(d));return false}function initPlugins(){initCorner();initMail();$("a[rel=imgbox] img, a[rel=vidbox] img").corner("5px");$("a[rel=imgbox]").fancybox({openEffect:"elastic",closeEffect:"elastic",prevEffect:"elastic",nextEffect:"elastic",helpers:{title:{type:"inside"},buttons:{}},afterLoad:function(){this.title="Bild "+(this.index+1)+" von "+this.group.length+(this.title?" - "+this.title:"")}});$("a[rel=vidbox]").fancybox({openEffect:"elastic",closeEffect:"elastic",helpers:{title:{type:"inside"},media:{}},});var e=document.getElementsByTagName("textarea");for(var j=0;j<e.length;j++){if(!e.id){e.id="ckeditor"+j}if(e[j].getAttribute("data-key")=="htmleditor"){var h="code,|,undo,redo,|,bold,italic,underline,strikethrough,|,forecolor,|,bullist,numlist,|,outdent,indent,|,removeformat,br";var f="justifyleft,justifycenter,justifyright,justifyfull,formatselect,fontselect,fontsizeselect,|,hr";var d="tablecontrols,|,link,unlink,|,image,media";var c="";var k="top";var g="bottom";if(e[j].offsetWidth<400){h="code,|,undo,redo,|,bold,italic,underline,strikethrough,|,forecolor";f="justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,|,removeformat,br";d="formatselect,fontselect,|,hr";c="fontsizeselect,|,link,unlink,|,image,media";if(e[j].offsetWidth<220){k="external";g=false}}tinyMCE.init({mode:"exact",elements:e[j].id,theme:"advanced",plugins:"autolink,lists,style,table,advhr,advimage,advlink,iespell,inlinepopups,media,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist,autosave,visualblocks,br",language:"de",theme_advanced_buttons1:h,theme_advanced_buttons2:f,theme_advanced_buttons3:d,theme_advanced_buttons4:c,theme_advanced_toolbar_location:k,theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:g,theme_advanced_resizing:true,theme_advanced_resize_horizontal:false,content_css:ROOT+"/extern/tiny_mce/content.css",external_image_list_url:ROOT+"/ajax/images.php?act=tinymce-imagelist"});e[j].removeAttribute("data-key");b=true}}gapi.plusone.go()}function initCorner(){$(".Corner").corner("5px");$(".Corner-Bottom").corner("bottom 5px");$("h1").corner("5px");$("table.BloggerPost").corner("5px");$("input[type=text],input[type=password],textarea,select").corner("3px");$("input[type=submit]").corner("10px")}function initMail(){var c=document.getElementsByTagName("a");for(i=0;i<c.length;i++){if(c[i].getAttribute("data-mail")){var d=c[i].getAttribute("data-mail")+"@"+c[i].getAttribute("data-host");c[i].href="mailto:"+d;c[i].innerHTML=d}}}function esc(){document.getElementById("popup").innerHTML="";return false}function getSort(a){var c="";var d=a.firstChild;do{if(d.getAttribute("data-key")){if(c!=""){c+="//"}c+=d.getAttribute("data-key")}}while(d=d.nextSibling);return c}function getPositionLeft(a){if(a){var c=0;if(a.offsetParent){while(a.offsetParent){c+=a.offsetLeft;a=a.offsetParent}}else{if(a.x){c=a.x}}return c}}function getPositionTop(c){if(c){var a=0;if(c.offsetParent){while(c.offsetParent){a+=c.offsetTop;c=c.offsetParent}}else{if(c.y){a=c.y}}return a}}function thread(a){window.setTimeout(a,1)}function imgdel(a){if(confirm("Wirklich löschen?")){ajaxPost("gallery","imgdel","id="+a,"content")}return false}function galdel(a){if(confirm("Wirklich löschen?")){ajaxPost("gallery","galdel","id="+a,"content")}return false}function siteEdit(c){document.getElementById("popup").innerHTML='<div class="Tooltip" style="top:'+(getPositionTop(c)+c.offsetHeight+10)+"px;left:"+(getPositionLeft(c)+(c.offsetWidth/2)-10)+'px"><div class="TooltipArrow"></div><a href="#" onClick="return esc()" class="TooltipClose">X</a><div class="TooltipInner" id="ttInner"></div></div>';var a="";if(c.getAttribute("data-key")){a="key="+c.getAttribute("data-key")}return ajaxPost("page","editSite",a,"ttInner")}function siteSafe(a){if(a.match(/^http/)){window.location.href=a}else{alert(a)}}function siteDel(a){if(confirm("Wirklich komplett löschen?")){ajaxPost("page","delSite","key="+a.getAttribute("data-key"),function(){if(this.readyState==4&&this.status==200){window.location.href=WEB}})}return false}function ajaxWait(a){thread(function(){return function(){var c=document.getElementById(a);if(c){c.innerHTML='<center><img src="'+ROOT+'/data/graphics/css/process.gif" /></center>'}}}(a))}function ajaxPost(d,c,a,h){var f;try{f=window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP")}catch(g){}f.onreadystatechange=typeof h=="function"?h:function(){if(f.readyState==4&&f.status==200){if(typeof h=="string"){h=document.getElementById(h)}if(h){h.innerHTML=f.responseText}initPlugins()}};f.open("POST",ROOT+"/ajax/"+d+".php?act="+c,true);f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");f.send(a);return false}function iframeResp(a){ajaxWait(a);iframePost("content")}function iframePost(c,a){if(!a){a=document.getElementById("iframe")}if(typeof c=="string"){ajaxWait(c)}iframePostWait(a,"",c);return true}function iframePostWait(c,a,d){html=c.contentWindow.document.body.innerHTML;if(a!=html){c.contentWindow.document.body.innerHTML="";if(typeof d=="function"){d(html)}else{if(html.match(/^http:\/\//)){window.location.href=html}else{if(typeof d=="string"){d=document.getElementById(d)}if(d){d.innerHTML=html}initPlugins()}}}else{window.setTimeout(function(f,e,g){return function(){iframePostWait(f,e,g)}}(c,a,d),1000)}}function sendMail(c,a){ajaxWait(c);iframePost(function(d){return function(e){if(e=="ok"){ajaxPost("mail","ok","","content")}else{document.getElementById(d).innerHTML=e}}}(c),document.getElementById(a));return true};